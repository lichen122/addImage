<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
    <title>Add Image</title>
    <link rel="stylesheet" href="http://js.arcgis.com/3.13/esri/css/esri.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://js.arcgis.com/3.13/dijit/themes/claro/claro.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/main.css">

    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="http://js.arcgis.com/3.13/"></script>
    <script src="js/bootstrap/dropdown.js"></script>

    <script>
    $(document).ready(function(){
    	$('.dropdown-toggle').dropdown()
    });

    var map;

    require(["esri/map",
      	   	   "esri/layers/MapImage","esri/layers/MapImageLayer",
      	   	   "esri/layers/FeatureLayer", "dojo/domReady!"],
      	function(Map,MapImage,MapImageLayer,FeatureLayer) {
        map = new Map("map", {
          basemap: "gray",  //For full list of pre-defined basemaps, navigate to http://arcg.is/1JVo6Wd
          center: [-79.933333,32.783333], // longitude, latitude
          zoom: 9
        });
      	$(".basemap").click(function(){
      		map.setBasemap(this.attributes.value.value);
      	});

      	$("#addBtn").click(function(){
      		var img = $('#fileupload')[0].files[0];
          if(img){
            $(".alert").addClass("alert_none");
            $(".alert").removeClass("alert_block");
            var tempUrl = window.URL.createObjectURL(img);
            var mapImage = new MapImage({
              'href': tempUrl,
              'extent':{'xmin': -79.733333, 'ymin': 32.783333, 'xmax': -80.933333, 'ymax': 33.783333}
            });
            var miLayer = new MapImageLayer();
            miLayer.addImage(mapImage);
            map.addLayer(miLayer);
          }else{
            $(".alert").removeClass("alert_none");
            $(".alert").addClass("alert_block");
            $(".alert").append("<p>ERROR: Please choose an image to add!</p>");
          }

      	})


    });

    </script>
  </head>

 <body >
  <div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'headline', gutters:false" style="width:100%;height:100%;margin:0px;">
    <div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
      <div>
        <nav class="navbar navbar-default" >
          <div class="container-fluid">
            <div class="navbar-header">
               <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Image Adder</a>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li class="dropdown">
                  <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false"> Basemap <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                  	<li><a href="#dropdown1" class="basemap" data-toggle="tab" aria-expanded="true" value="gray">Gray</a></li>
                  	<li class="divider"></li>
                  	<li><a href="#dropdown2" class="basemap" data-toggle="tab" aria-expanded="true" value="dark-gray">Dark-Gray</a></li>
                  	<li class="divider"></li>
                    <li ><a href="#dropdown3" class="basemap"data-toggle="tab" aria-expanded="false" value="streets">Streets</a></li>
                    <li class="divider"></li>
                    <li><a href="#dropdown4" class="basemap" data-toggle="tab" aria-expanded="true" value="satellite">Satellite</a></li>
                    <li class="divider"></li>
                    <li><a href="#dropdown5" class="basemap" data-toggle="tab" aria-expanded="true" value="hybrid">Hybrid</a></li>
                    <li class="divider"></li>
                    <li><a href="#dropdown6" class="basemap" data-toggle="tab" aria-expanded="true" value="topo">Topo</a></li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false"> Tools <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li class=""><a href="#dropdown1" data-toggle="tab" aria-expanded="false">Measure</a></li>
                    <li class="divider"></li>
                    <li><a href="#dropdown2" data-toggle="tab" aria-expanded="true">Draw</a></li>
                    <li class="divider"></li>
                    <li><a href="#dropdown2" data-toggle="tab" aria-expanded="true">Print</a></li>
                  </ul>
                </li>

              </ul>
              <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                  <input type="text" class="form-control" placeholder="Search">
                </div>
                <span class="glyphicon glyphicon-search" ></span>
              </form>

            </div>
          </div>
        </nav>
      </div>
    </div>

    <div id="map" dojotype="dijit/layout/ContentPane" data-dojo-props="region:'center'">
    	<div class="roundedCorners addImagePanel">
            <br/>
            <div>
          		<span class="btn btn-primary fileinput-button">
        	 		<input id="fileupload" type="file">
    			</span>
        	</div><br/>
        	<div>
        		<h7>xmin:</h4><input type="text" placeholder="-79.733333"></input> Or <button class="btn btn-primary" type="button">Click on Map</button>
       		</div><br/>
        	<div>
        		<h7>ymin:</h4><input type="text" placeholder="32.783333"></input> Or <button class="btn btn-primary" type="button">Click on Map</button>
        	</div><br/>
       		<div>
        		<h7>xmax:</h4><input type="text" placeholder="-80.933333"></input> Or <button class="btn btn-primary" type="button">Click on Map</button>
        	</div><br/>
        	<div>
        		<h7>ymax:</h4><input type="text" placeholder="33.783333"></input> Or <button class="btn btn-primary" type="button">Click on Map</button>
        	</div><br/>

        	<button id="addBtn" class="btn btn-success center-block">Add on Map</button>
          <div class="alert alert-danger alert_none" role="alert" ></div><br/>

        </div>
    </div>

  </div>
</body>
</html>